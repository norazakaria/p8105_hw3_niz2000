---
title: "p8105_hw3_niz2000"
author: "Nora Zakaria"
date: "10/14/2019"
output: github_document
---

```{r}
library(tidyverse)
```


# Problem 1

## Load the Instacart Dataset
```{r}
library(p8105.datasets)
data("instacart")
instacart
```
The Instacart dataset consists of 1,384,617 observations and 17 different variables relating to instacart orders. Key variables include the order_id, product_id, reordered, days_since_prior_order, product_name, and the department. Using the dataset, you can determine information about specific ordering behavior for an individual. For example, order identifier 1 (order_id) ordered product number 49302 (product_id=49302) Bulgarian Yogurt (product_name) from the dairy eggs department (department), and reordered the product an additional time (reordered). Order identifier 36 (order_id) ordered water seltzer sparkling water (product_name) from the beverages department (department), 7 days after their last instacart order (days_since_prior_order).

## How many aisles there are, and which aisles the most items are ordered from?
```{r}
instacart %>%
  count(aisle)  %>%
  arrange(desc(n)) 
```
The most items are ordered were from the fresh vegetables and fresh fruits aisles, at 150,609 items and 150,473, respectively. The aisle with the next highest items ordered was the packaged vegetables fruits aisle, at 78,493 items.

## Plot demonstrating the number of items ordered in each aisle, limited to aisles with more than 10000 items ordered
```{r}
Aisle_items_plot = instacart %>%
  count(aisle) %>%
  filter(n > 10000) %>%
  arrange(desc(n)) %>%
  rename(n_items_ordered = n)

Aisle_items_plot %>%
  ggplot(aes(x = reorder(aisle, -n_items_ordered), y = n_items_ordered)) +
  geom_bar(stat = "identity") +
  theme(axis.text.x = element_text(angle = 90, hjust = 1, vjust = 0.5)) +
  labs(
    title = "Items Ordered per Aisle",
    x = "Aisle Name",
    y = "Number of Items Ordered")
```

## 3 most popular items in each of the aisles “baking ingredients”, “dog food care”, and “packaged vegetables fruits”
```{r}
instacart %>%
  group_by(product_name, aisle) %>%
  summarize(
    n_items_ordered = n()
    ) %>%
  group_by(aisle) %>%
  filter(
    aisle %in% c("baking ingredients", "dog food care", "packaged vegetables fruits"),
    min_rank(desc(n_items_ordered)) <4 ) %>%
  arrange(n_items_ordered, aisle) %>%
  knitr::kable(format = 'pandoc' , caption = "Table: Most Popular Items by Aisle")
```


## Mean hour of the day at which Pink Lady Apples and Coffee Ice Cream are ordered on each day of the week